# Pubs Database Analytical Overview and Questions

## Overview of the Pubs Database

The Pubs database is a sample database designed to simulate the operations of a publishing company. It includes tables related to authors, books (titles), publishers, stores, and sales transactions. This database is often used for demonstrating SQL queries and database management concepts.

## Schema Description

The Pubs database consists of the following primary tables:

1. **Authors Table**: Contains information about authors.
2. **Titles Table**: Contains information about books (titles) published.
3. **Publishers Table**: Contains information about publishing companies.
4. **Stores Table**: Contains information about stores that sell the books.
5. **Sales Table**: Records sales transactions of books by stores.
6. **TitleAuthor Table**: A junction table that links authors to titles they have written.

## Tables and Their Relationships

### Authors (authors)
- **Columns**: `au_id` (Primary Key), `au_fname`, `au_lname`, `phone`, `address`, `city`, `state`, `zip`, `contract`
- **Description**: Stores detailed information about each author.

### Titles (titles)
- **Columns**: `title_id` (Primary Key), `title`, `type`, `pub_id` (Foreign Key), `price`, `advance`, `royalty`, `ytd_sales`, `notes`, `pubdate`
- **Description**: Stores detailed information about each book, including its publisher.

### Publishers (publishers)
- **Columns**: `pub_id` (Primary Key), `pub_name`, `city`, `state`, `country`
- **Description**: Stores detailed information about each publishing company.

### Stores (stores)
- **Columns**: `stor_id` (Primary Key), `stor_name`, `stor_address`, `city`, `state`, `zip`
- **Description**: Stores detailed information about each store that sells books.

### Sales (sales)
- **Columns**: `stor_id` (Foreign Key), `ord_num`, `ord_date`, `qty`, `payterms`, `title_id` (Foreign Key)
- **Description**: Records sales transactions, linking stores, orders, and titles.

### TitleAuthor (titleauthor)
- **Columns**: `au_id` (Foreign Key), `title_id` (Foreign Key), `au_ord`, `royaltyper`
- **Description**: Links authors to titles they have written. A single author can write multiple titles, and a single title can have multiple authors.

## Analytical Use Cases

The Pubs database can be used for various analytical purposes:

1. **Sales Analysis**:
    - **Sales by Store**: Analyze the total sales amount for each store to identify top-performing stores.
    - **Sales by Title**: Determine which book titles are the best sellers.
    - **Sales by Author**: Identify authors whose books have the highest sales.

2. **Author Contributions**:
    - **Books per Author**: Count the number of books written by each author to identify prolific authors.
    - **Author Collaborations**: Analyze co-authorship patterns and identify frequent collaborators.

3. **Publisher Performance**:
    - **Titles by Publisher**: Count the number of titles published by each publisher.
    - **Revenue by Publisher**: Calculate the total revenue generated by each publisher based on book sales.

4. **Geographical Analysis**:
    - **Stores by Location**: Map the distribution of stores by city and state to understand market coverage.
    - **Sales by Region**: Analyze sales performance by geographical regions.

## Example Analytical Queries

### Total Sales by Store
```sql
SELECT s.stor_name, SUM(sa.qty * t.price) AS TotalSales
FROM stores s
JOIN sales sa ON s.stor_id = sa.stor_id
JOIN titles t ON sa.title_id = t.title_id
GROUP BY s.stor_name;
```
### Top-Selling Titles
```sql

SELECT t.title, SUM(sa.qty) AS TotalQuantitySold
FROM titles t
JOIN sales sa ON t.title_id = sa.title_id
GROUP BY t.title
ORDER BY TotalQuantitySold DESC;
```

### Revenue by Publisher
```sql
SELECT p.pub_name, SUM(sa.qty * t.price) AS TotalRevenue
FROM publishers p
JOIN titles t ON p.pub_id = t.pub_id
JOIN sales sa ON t.title_id = sa.title_id
GROUP BY p.pub_name;
```

### Books Written by Each Author
```sql
SELECT a.au_fname, a.au_lname, COUNT(t.title_id) AS NumberOfBooks
FROM authors a
JOIN titleauthor ta ON a.au_id = ta.au_id
JOIN titles t ON ta.title_id = t.title_id
GROUP BY a.au_fname, a.au_lname;
```

### Sales Distribution by Region
```sql
SELECT s.state, SUM(sa.qty * t.price) AS TotalSales
FROM stores s
JOIN sales sa ON s.stor_id = sa.stor_id
JOIN titles t ON sa.title_id = t.title_id
GROUP BY s.state;
```

## Formulated Questions for Students

### Understanding the Schema

1. **Authors and Their Books**:
    - **Question**: How can you list all authors along with the titles of the books they have written?
    - **Hint**: You will need to join the `authors`, `titleauthor`, and `titles` tables.

2. **Books and Their Publishers**:
    - **Question**: How can you list all book titles along with the names of their publishers?
    - **Hint**: You will need to join the `titles` and `publishers` tables.

3. **Stores and Their Sales**:
    - **Question**: How can you find out which books are sold by each store?
    - **Hint**: You will need to join the `stores`, `sales`, and `titles` tables.

4. **Authors and Publishers**:
    - **Question**: How can you list all authors and the publishers of their books?
    - **Hint**: This will require joining the `authors`, `titleauthor`, `titles`, and `publishers` tables.

5. **Books Without Authors**:
    - **Question**: How can you list all book titles including those that do not have any associated authors?
    - **Hint**: Use a left join between `titles` and `titleauthor` tables, and then join with the `authors` table.

### Analytical Questions

1. **Top-Selling Titles**:
    - **Question**: How can you determine which book titles are the best sellers?
    - **Hint**: Aggregate the sales quantities for each title from the `sales` table joined with the `titles` table.

2. **Author Productivity**:
    - **Question**: How can you find out which authors have written more than one book?
    - **Hint**: Group by author in the `titleauthor` table and use a HAVING clause.

3. **Revenue by Publisher**:
    - **Question**: How can you calculate the total revenue generated by each publisher based on book sales?
    - **Hint**: You need to join `publishers`, `titles`, and `sales` tables and sum up the product of quantity and price.

4. **Store Performance**:
    - **Question**: How can you list each store along with the total sales amount they have generated?
    - **Hint**: Join `stores`, `sales`, and `titles` tables and sum the product of quantity sold and book price.

5. **Regional Sales Distribution**:
    - **Question**: How can you analyze the sales distribution by different states?
    - **Hint**: Group the sales data by state from the `stores` table and aggregate the sales amounts.

### Advanced Questions

1. **Multiple Authors and Titles**:
    - **Question**: How can you list the titles that have multiple authors?
    - **Hint**: Group by `title_id` in the `titleauthor` table and use a HAVING clause to filter titles with more than one author.

2. **Publisher's Best-Selling Titles**:
    - **Question**: How can you find out which book title from each publisher has the highest sales?
    - **Hint**: Use joins and subqueries to find the maximum sales per publisher.

3. **Monthly Sales Trends**:
    - **Question**: How can you determine the monthly sales trends for each store?
    - **Hint**: Extract month and year from `ord_date` in the `sales` table and group the sales data accordingly.

4. **Sales by Author**:
    - **Question**: How can you calculate the total sales amount for each authorâ€™s books?
    - **Hint**: Join `authors`, `titleauthor`, `titles`, and `sales` tables and sum the sales amounts.

5. **Store and Book Sales Details**:
    - **Question**: How can you get detailed information on which books each store has sold, including the quantity and sales amount?
    - **Hint**: Join `stores`, `sales`, and `titles` tables and include the sales quantity and calculated sales amount.

